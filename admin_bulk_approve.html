<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Bulk Approve Members | Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
header{
  background:#7b0000;color:#fff;
  text-align:center;padding:15px
}
.container{
  max-width:900px;margin:20px auto;
  background:#fff;padding:20px;border-radius:10px
}
.notice{
  background:#fff3cd;border-left:5px solid #ff9800;
  padding:10px;font-size:13px;margin-bottom:15px
}
.member{
  padding:8px;border-bottom:1px solid #eee;
  display:flex;gap:8px;align-items:center
}
.member small{color:#555}
.actions{margin:15px 0;text-align:center}
button{
  padding:10px 14px;margin:5px;
  border:none;border-radius:6px;
  font-size:14px;cursor:pointer
}
.approve{background:#28a745;color:#fff}
.download{background:#7b0000;color:#fff}
.count{text-align:center;font-size:14px;margin-bottom:10px}
footer{text-align:center;font-size:12px;color:#555;margin:20px}
</style>
</head>

<body>

<header>
  <h2>üöÄ Bulk Approve Members</h2>
  <p>Admin Panel (GitHub Pages Mode)</p>
</header>

<div class="container">

<div class="notice">
‚ö†Ô∏è <b>Important:</b> ‡§Ø‡§π GitHub Static Mode ‡§π‡•à‡•§  
Approve ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ <b>Updated members.json</b> ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã‡§ó‡§æ‡•§  
‡§â‡§∏ ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡•ã GitHub repo ‡§Æ‡•á‡§Ç replace ‡§ï‡§∞‡§®‡§æ ‡§ú‡§º‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à‡•§
</div>

<div class="count">
Pending Members: <b id="pendingCount">0</b>
</div>

<div id="list"></div>

<div class="actions">
  <button class="approve" onclick="approveSelected()">‚úÖ Approve Selected</button>
  <button class="download" onclick="download()">‚¨áÔ∏è Download Updated JSON</button>
</div>

</div>

<footer>
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ<br>
Admin Use Only
</footer>

<script>
let members = [];

fetch("data/members.json")
  .then(r=>r.json())
  .then(d=>{
    members = d;
    render();
  })
  .catch(()=>{
    alert("‚ùå members.json load ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü");
  });

function render(){
  const list=document.getElementById("list");
  list.innerHTML="";
  let pending=0;

  members.forEach((m,i)=>{
    if((m.status||"pending")==="pending"){
      pending++;
      const mid = m.member_id || m.memberId || "N/A";
      list.innerHTML+=`
      <div class="member">
        <input type="checkbox" data-i="${i}" checked>
        <div>
          <b>${m.name || "No Name"}</b><br>
          <small>ID: ${mid} | ${m.post || ""}</small>
        </div>
      </div>`;
    }
  });

  document.getElementById("pendingCount").innerText = pending;

  if(pending===0){
    list.innerHTML="<p>‚úÖ ‡§ï‡•ã‡§à Pending Member ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à</p>";
  }
}

function approveSelected(){
  const checks=document.querySelectorAll("input[type=checkbox]:checked");
  if(checks.length===0){
    alert("‡§ï‡•ã‡§à Member select ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à");
    return;
  }

  checks.forEach(c=>{
    const i = c.getAttribute("data-i");
    members[i].status = "approved";
  });

  alert("‚úÖ Selected members Approved (Preview)");
  render();
}

function download(){
  const blob=new Blob(
    [JSON.stringify(members,null,2)],
    {type:"application/json"}
  );
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="members.json";
  a.click();
}
</script>

</body>
</html>
