<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>CSV to JSON Bulk Tool | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
.box{
  max-width:900px;margin:30px auto;
  background:#fff;padding:20px;border-radius:10px
}
h2{text-align:center;color:#7b0000}
input[type=file]{margin:10px 0}
.btn{
  padding:10px 16px;background:#7b0000;
  color:#fff;border:none;border-radius:6px;cursor:pointer
}
textarea{
  width:100%;height:280px;margin-top:15px;
  font-family:monospace;font-size:12px
}
.note{font-size:13px;color:#555;margin-top:10px;line-height:1.6}
</style>
</head>

<body>

<div class="box">
<h2>üìÑ CSV ‚Üí JSON Bulk Members Tool</h2>

<p><b>Step-1:</b> CSV file upload ‡§ï‡§∞‡•á‡§Ç</p>
<input type="file" id="csv" accept=".csv">

<p><b>Step-2:</b> Generate JSON</p>
<button class="btn" onclick="parseCSV()">Generate JSON</button>

<h3>Generated JSON (Copy & Paste)</h3>
<textarea id="out"></textarea>

<div class="note">
<b>CSV Columns Order (Header required):</b><br>
Member_ID, Name, Father, Mobile, Post, Department, Level, District, State, Photo_URL
<br><br>
üëâ Generated JSON ‡§ï‡•ã <b>data/members.json</b> ‡§Æ‡•á‡§Ç paste ‡§ï‡§∞‡•á‡§Ç<br>
üëâ Status default <b>pending</b> ‡§∞‡§π‡•á‡§ó‡§æ (Bulk Approve ‡§∏‡•á approve ‡§ï‡§∞‡•á‡§Ç)
</div>
</div>

<script>
function parseCSV(){
  const file=document.getElementById("csv").files[0];
  if(!file){
    alert("‚ùå CSV file select ‡§ï‡§∞‡•á‡§Ç");
    return;
  }

  const reader=new FileReader();
  reader.onload=e=>{
    const text=e.target.result.trim();
    const lines=text.split(/\r?\n/);
    const data=[];
    const today=new Date().toISOString().split("T")[0];

    // assume first row is header
    for(let i=1;i<lines.length;i++){
      const line=lines[i];
      if(!line.trim()) continue;

      // simple CSV split (safe for normal admin CSV)
      const c=line.split(",").map(x=>x.trim());
      if(!c[0]) continue;

      data.push({
        member_id: c[0],
        name: c[1] || "",
        father: c[2] || "",
        mobile: c[3] || "",
        post: c[4] || "",
        department: c[5] || "",
        level: c[6] || "",
        district: c[7] || "",
        state: c[8] || "",
        photo: c[9] || "",
        status: "pending",
        created_at: today
      });
    }

    if(!data.length){
      alert("‚ùå CSV ‡§Æ‡•á‡§Ç valid data ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ");
      return;
    }

    document.getElementById("out").value =
      JSON.stringify(data,null,2);
  };

  reader.readAsText(file);
}
</script>

<footer style="text-align:center;font-size:13px;color:#555;margin:30px 0">
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ<br>
‡§Ø‡§π ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Ç‡§ó‡§†‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡•á‡§§‡•Å ‡§π‡•à‡•§
</footer>

</body>
</html>
