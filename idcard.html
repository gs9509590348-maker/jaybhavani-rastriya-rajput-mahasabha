<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JB RRMS PVC ID Card</title>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<style>
body{
  font-family: Arial;
  background:#f5f5f5;
  text-align:center;
}

/* PVC CARD SIZE */
.card-wrapper{
  display:flex;
  justify-content:center;
  gap:25px;
  margin-top:25px;
}

.card{
  width: 340px;
  height: 540px;
  position: relative;
  border-radius:12px;
  overflow:hidden;
}

/* FRONT / BACK BACKGROUND */
.card img.bg{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* PHOTO */
.photo{
  position:absolute;
  top:150px;
  left:50%;
  transform:translateX(-50%);
  width:115px;
  height:135px;
  border-radius:10px;
  object-fit:cover;
  background:#fff;
  border:2px solid #ddd;
}

/* TEXT (FRONT) */
.details{
  position:absolute;
  bottom:70px;
  width:100%;
  text-align:center;
  font-size:14px;
}

/* BACK SIDE HEADING */
.back-title{
  position:absolute;
  top:20px;
  width:100%;
  text-align:center;
  font-weight:bold;
  font-size:16px;
}

/* QR CENTER */
.qr{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:110px;
  height:110px;
  background:white;
  padding:6px;
  border-radius:8px;
}

.footer{
  position:absolute;
  bottom:15px;
  left:20px;
  font-size:12px;
  text-align:left;
}
</style>
</head>

<body>

<h2>JB RRMS Member PVC ID Card</h2>

<div class="card-wrapper">

  <!-- FRONT -->
  <div class="card">
    <img class="bg" src="https://ejdzdptqxelilkseannw.supabase.co/storage/v1/object/public/members/idcard_front.png">

    <img id="photo" class="photo">

    <div class="details">
      <b id="name"></b><br>
      Member Code: <span id="code"></span><br>
      Father: <span id="father"></span><br>
      Mobile: <span id="mobile"></span><br>
      District: <span id="district"></span><br>
      State: <span id="state"></span>
    </div>
  </div>

  <!-- BACK -->
  <div class="card">
    <img class="bg" src="https://ejdzdptqxelilkseannw.supabase.co/storage/v1/object/public/members/idcard_back.png">

    <div class="back-title">
      ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ
    </div>

    <div id="qr" class="qr"></div>

    <div class="footer">
      üìß Email: jbrrms1@gmail.com<br>
      üìû Helpline: 9166377972<br>
      üåê Website: www.jbrrms.in<br><br>
      ‚ö† ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Ç‡§ó‡§†‡§® ‡§ï‡•Ä ‡§™‡§π‡§ö‡§æ‡§® ‡§™‡§§‡•ç‡§∞ ‡§π‡•à‡•§
    </div>
  </div>

</div>

<script>
const supabaseUrl = "https://ejdzdptqxelilkseannw.supabase.co";
const supabaseKey = "sb_publishable_iU5rrjm63ImncflRhIkQYQ_QHyDR92P";
const db = supabase.createClient(supabaseUrl, supabaseKey);

const member_code = "JBRRMS0001"; // ‡§Ø‡§π‡§æ‡§Å dynamic code ‡§°‡§æ‡§≤‡§®‡§æ

(async()=>{
 let { data } = await db.from("JBRRMS").select("*").eq("member_code", member_code).single();

 document.getElementById("name").innerText = data.name;
 document.getElementById("father").innerText = data.father_name;
 document.getElementById("mobile").innerText = data.mobile;
 document.getElementById("district").innerText = data.district;
 document.getElementById("state").innerText = data.state;
 document.getElementById("code").innerText = data.member_code;
 document.getElementById("photo").src = data.photo_url;

 QRCode.toCanvas(document.getElementById("qr"), data.member_code);
})();
</script>

</body>
</html>
