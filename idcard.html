<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>JBRRMS ID Card Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
body{
  margin:0;
  background:#111;
  font-family:Arial, sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  padding:20px;
}

/* COMMON CARD */
.card{
  width:1080px;
  height:1676px;
  position:relative;
  background-size:cover;
  background-position:center;
  box-shadow:0 0 25px rgba(0,0,0,.7);
}

/* FRONT */
.front{
  background-image:url("https://ejdzdptqxelilkseannw.supabase.co/storage/v1/object/public/members/idcard_front.png");
}

/* BACK */
.back{
  background-image:url("https://ejdzdptqxelilkseannw.supabase.co/storage/v1/object/public/members/idcard_back.png");
}

/* PHOTO */
.photo{
  position:absolute;
  top:280px;
  left:390px;
  width:300px;
  height:380px;
  border-radius:20px;
  overflow:hidden;
  border:4px solid #9b0000;
  background:#eee;
}
.photo img{width:100%;height:100%;object-fit:cover}

/* FRONT INFO */
.info{
  position:absolute;
  top:700px;
  left:140px;
  right:140px;
  font-size:34px;
  line-height:1.5;
  color:#4a1a00;
}
.info b{display:inline-block;width:260px}

/* BACK CONTENT */
.back-title{
  position:absolute;
  top:160px;
  width:100%;
  text-align:center;
  font-size:48px;
  font-weight:bold;
  color:#8b0000;
}

.qr{
  position:absolute;
  top:420px;
  left:390px;
  width:300px;
  height:300px;
}

.back-footer{
  position:absolute;
  bottom:220px;
  width:100%;
  text-align:center;
  font-size:28px;
  color:#4a1a00;
  line-height:1.6;
}

.disclaimer{
  position:absolute;
  bottom:80px;
  left:100px;
  right:100px;
  font-size:22px;
  text-align:center;
  color:#5b3a00;
}

/* BUTTONS */
button{
  padding:12px 24px;
  font-size:16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.download{background:#0b57d0;color:#fff}
</style>
</head>

<body>

<!-- FRONT -->
<div id="front" class="card front">
  <div class="photo">
    <img id="photo" src="" alt="photo">
  </div>

  <div class="info">
    <div><b>рдирд╛рдо:</b> <span id="name"></span></div>
    <div><b>рдкрд┐рддрд╛:</b> <span id="father"></span></div>
    <div><b>рдЬрд┐рд▓рд╛:</b> <span id="district"></span></div>
    <div><b>рд░рд╛рдЬреНрдп:</b> <span id="state"></span></div>
    <div><b>рдореЛрдмрд╛рдЗрд▓:</b> <span id="mobile"></span></div>
    <div><b>Member Code:</b> <span id="code"></span></div>
  </div>
</div>

<button class="download" onclick="download('front')">тмЗя╕П Download Front</button>

<!-- BACK -->
<div id="back" class="card back">
  <div class="back-title">рдЬрдп рднрд╡рд╛рдиреА рд░рд╛рд╖реНрдЯреНрд░реАрдп рд░рд╛рдЬрдкреВрдд рдорд╣рд╛рд╕рднрд╛</div>

  <img id="qr" class="qr" src="">

  <div class="back-footer">
    ЁЯУЮ Helpline: 9166377972<br>
    тЬЙя╕П jbrrms1@gmail.com<br>
    ЁЯМР www.jbrrms.in
  </div>

  <div class="disclaimer">
    рдпрд╣ рдкрд╣рдЪрд╛рди рдкрддреНрд░ рд╕рдВрдЧрдарди рдХреА рд╕рдВрдкрддреНрддрд┐ рд╣реИред рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рджреБрд░реБрдкрдпреЛрдЧ,
    рдкрд░рд┐рд╡рд░реНрддрди рдпрд╛ рдлрд░реНрдЬреА рдЙрдкрдпреЛрдЧ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдпрд╣ рдЕрдорд╛рдиреНрдп рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ред
    рдорд┐рд▓рдиреЗ рдкрд░ рдирд┐рдХрдЯрддрдо рд╕рдВрдЧрдарди рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рдЬрдорд╛ рдХрд░рд╛рдирд╛ рдЕрдирд┐рд╡рд╛рд░реНрдп рд╣реИред
  </div>
</div>

<button class="download" onclick="download('back')">тмЗя╕П Download Back</button>

<script>
/* ===== URL PARAMS ===== */
const p = new URLSearchParams(location.search);

const data = {
  code: p.get("code") || "JBRRMS0001",
  name: p.get("name") || "рдирд╛рдо",
  father: p.get("father") || "рдкрд┐рддрд╛ рдХрд╛ рдирд╛рдо",
  district: p.get("district") || "рдЬрд┐рд▓рд╛",
  state: p.get("state") || "рд░рд╛рдЬреНрдп",
  mobile: p.get("mobile") || "0000000000",
  photo: p.get("photo") || ""
};

/* ===== FILL DATA ===== */
for(let k in data){
  if(document.getElementById(k))
    document.getElementById(k).innerText = data[k];
}

/* PHOTO */
document.getElementById("photo").src =
  data.photo ||
  "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjM4MCIgdmlld0JveD0iMCAwIDMwMCAzODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIzODAiIGZpbGw9IiNlZWUiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UGhvdG88L3RleHQ+PC9zdmc+";

/* QR */
document.getElementById("qr").src =
  "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data="+data.code;

/* DOWNLOAD */
function download(id){
  const el = document.getElementById(id);
  html2canvas(el,{scale:2}).then(c=>{
    const a = document.createElement("a");
    a.download = `JBRRMS_IDCARD_${id.toUpperCase()}_${data.code}.png`;
    a.href = c.toDataURL("image/png");
    a.click();
  });
}
</script>

</body>
</html>
