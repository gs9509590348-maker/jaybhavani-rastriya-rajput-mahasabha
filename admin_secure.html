<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Secure Admin | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
.box{
  max-width:420px;margin:80px auto;background:#fff;
  padding:25px;border-radius:10px;text-align:center
}
input{width:100%;padding:10px;margin:10px 0}
.btn{
  width:100%;padding:10px;background:#7b0000;
  color:#fff;border:none;border-radius:6px;cursor:pointer
}
.hidden{display:none}
.container{
  max-width:1200px;margin:20px auto;background:#fff;
  padding:15px;border-radius:8px
}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #ccc;padding:6px}
th{background:#eee}
.footer{text-align:center;font-size:13px;color:#555;margin:30px 0}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
  <h3>üîê Admin Login</h3>
  <input type="password" id="pass" placeholder="Enter Password">
  <button class="btn" onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div class="container hidden" id="dash">
  <h2>Admin Dashboard</h2>
  <input id="q" placeholder="Search member">
  <button class="btn" onclick="search()">Search</button>

  <table id="tbl">
    <thead>
      <tr>
        <th>ID</th><th>Name</th><th>Post</th>
        <th>District</th><th>State</th><th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>Selected Member JSON</h3>
  <textarea id="json" style="width:100%;height:160px;font-family:monospace"></textarea>
</div>

<div class="footer">
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ
</div>

<script>
const PASSWORD="JBRRMS@123"; // üîë CHANGE THIS
let members=[];

function login(){
  if(document.getElementById("pass").value===PASSWORD){
    loginBox.classList.add("hidden");
    dash.classList.remove("hidden");
    load();
  }else{
    alert("Wrong Password");
  }
}

function load(){
  fetch("data/members.json").then(r=>r.json()).then(d=>{
    members=d; render(d);
  });
}

function render(list){
  const tb=document.querySelector("#tbl tbody");
  tb.innerHTML="";
  list.forEach(m=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${m.member_id}</td>
      <td>${m.name}</td>
      <td>${m.post}</td>
      <td>${m.district||""}</td>
      <td>${m.state||""}</td>
      <td>
        <button onclick='select(${JSON.stringify(m)})'>View</button>
      </td>`;
    tb.appendChild(tr);
  });
}

function search(){
  const q=document.getElementById("q").value.toLowerCase();
  render(members.filter(m=>JSON.stringify(m).toLowerCase().includes(q)));
}

function select(m){
  json.value=JSON.stringify(m,null,2);
}
</script>

</body>
</html>
