<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Member Directory | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial,sans-serif;background:#f4f4f4;margin:0}
.header{
  background:#7b0000;color:#fff;
  padding:15px;text-align:center
}
.container{
  max-width:1100px;margin:20px auto;
  background:#fff;padding:15px;border-radius:8px
}
input{
  width:100%;padding:10px;
  margin:10px 0;font-size:14px
}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #ccc;padding:6px;text-align:left}
th{background:#eee}
.footer{
  text-align:center;font-size:13px;
  color:#555;margin:30px 0
}
.badge{
  padding:3px 6px;border-radius:4px;
  font-size:12px;background:#28a745;color:#fff
}
a.btn{
  padding:5px 10px;background:#555;
  color:#fff;border-radius:4px;
  text-decoration:none;font-size:12px
}
.note{
  font-size:12px;color:#666;margin-top:10px
}
</style>
</head>

<body>

<div class="header">
  <h2>‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ</h2>
  <p>Public Member Directory</p>
</div>

<div class="container">

<h3>üîç ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ñ‡•ã‡§ú‡•á‡§Ç</h3>
<input id="q" placeholder="Name / Member ID / Post / District / State">

<table>
<thead>
<tr>
<th>Member ID</th>
<th>Name</th>
<th>Post</th>
<th>Level</th>
<th>District</th>
<th>State</th>
<th>Status</th>
<th>Verify</th>
</tr>
</thead>
<tbody id="tbl"></tbody>
</table>

<p class="note">
‚ö†Ô∏è ‡§Ø‡§π ‡§∏‡•Ç‡§ö‡•Ä ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§π‡•á‡§§‡•Å ‡§π‡•à‡•§  
Mobile ‡§®‡§Ç‡§¨‡§∞ / ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä‡•§
</p>

</div>

<div class="footer">
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ<br>
‡§Ø‡§π ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü ‡§ï‡•á‡§µ‡§≤ ‡§∏‡§Ç‡§ó‡§†‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡•á‡§§‡•Å ‡§π‡•à‡•§
</div>

<script>
let members = [];

/* üîó GOOGLE APPS SCRIPT LIVE API */
const API =
"https://script.google.com/macros/s/AKfycbzc6Nc1K1QZiQeDLpx5YOWLIpdLp6oI7PHoTc4Pwas5ccJRYP-_tV2p8gJIj-kgURAwkg/exec?action=approved";

/* LOAD DATA */
fetch(API)
.then(res => res.json())
.then(data => {
  members = data || [];
  render(members);
})
.catch(err => {
  console.error(err);
  alert("‚ùå Server ‡§∏‡•á data load ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü");
});

/* RENDER TABLE */
function render(list){
  const tb = document.getElementById("tbl");
  tb.innerHTML = "";

  if(!list.length){
    tb.innerHTML = "<tr><td colspan='8'>No approved members</td></tr>";
    return;
  }

  list.forEach(m=>{
    const mid = m.member_id || m.memberId || "";
    if(!mid) return;

    tb.innerHTML += `
    <tr>
      <td>${mid}</td>
      <td>${m.name || ""}</td>
      <td>${m.post || ""}</td>
      <td>${m.level || ""}</td>
      <td>${m.district || ""}</td>
      <td>${m.state || ""}</td>
      <td><span class="badge">APPROVED</span></td>
      <td>
        <a class="btn" target="_blank"
           href="verify.html?id=${mid}">
           Verify
        </a>
      </td>
    </tr>`;
  });
}

/* SEARCH */
document.getElementById("q").addEventListener("input", e=>{
  const q = e.target.value.toLowerCase();
  render(
    members.filter(m=>{
      const mid = (m.member_id||m.memberId||"").toLowerCase();
      return (
        (m.name||"").toLowerCase().includes(q) ||
        mid.includes(q) ||
        (m.post||"").toLowerCase().includes(q) ||
        (m.district||"").toLowerCase().includes(q) ||
        (m.state||"").toLowerCase().includes(q)
      );
    })
  );
});
</script>

</body>
</html>
