<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Member ID Card | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{background:#eee;font-family:Arial;margin:0}
.card{width:330px;margin:25px auto;background:#fff;border:2px solid #7b0000;border-radius:12px;overflow:hidden}
.header{background:#7b0000;color:#fff;text-align:center;padding:10px}
.photo{text-align:center;margin-top:10px}
.photo img{width:90px;height:90px;border-radius:50%;border:2px solid #7b0000;object-fit:cover}
.info{padding:10px 15px;font-size:13px}
.info p{margin:4px 0}
.qr{text-align:center;padding:10px}
.qr img{width:95px}
.footer{background:#f4f4f4;text-align:center;font-size:12px;padding:8px}
.btn{display:block;width:92%;margin:8px auto;padding:10px;background:#7b0000;color:#fff;border:none;border-radius:6px;font-size:14px}
.gray{background:#555}
.whatsapp{background:#25D366}
@media print{.no-print{display:none}}
</style>
</head>

<body>

<div class="card" id="card">
  <div class="header">
    <b>‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ</b><br>
    <small>Official Member ID Card</small>
  </div>

  <div class="photo">
    <img id="photo" src="https://via.placeholder.com/90">
  </div>

  <div class="info">
    <p><b>Name:</b> <span id="name"></span></p>
    <p><b>Father:</b> <span id="father"></span></p>
    <p><b>Post:</b> <span id="post"></span></p>
    <p><b>District:</b> <span id="district"></span></p>
    <p><b>State:</b> <span id="state"></span></p>
    <p><b>Member ID:</b> <span id="mid"></span></p>
  </div>

  <div class="qr">
    <img id="qr">
  </div>

  <div class="footer">
    Verify: https://jbrrms.in/verify.html
  </div>
</div>

<button class="btn no-print" onclick="window.print()">üñ®Ô∏è Print</button>
<a id="a4" class="btn gray no-print">üßæ A4 Print</a>
<button class="btn whatsapp no-print" onclick="share()">üì≤ WhatsApp</button>

<script>
const id=new URLSearchParams(location.search).get("id");
if(!id) alert("Member ID missing");

fetch("https://jbrrms.in/members.json")
.then(r=>r.json())
.then(list=>{
  const m=list.find(x=>x.id===id);
  if(!m) return alert("Member not found");

  name.innerText=m.name||"";
  father.innerText=m.father||"";
  post.innerText=m.post||"";
  district.innerText=m.district||"";
  state.innerText=m.state||"";
  mid.innerText=m.id;
  if(m.photo) photo.src=m.photo;

  const v="https://jbrrms.in/verify.html?id="+m.id;
  qr.src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(v);
  a4.href="idcard-a4.html?id="+m.id;

  window.share=()=>window.open("https://wa.me/?text="+encodeURIComponent(
`‡§Æ‡•à‡§Ç ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ ‡§ï‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡•Ç‡§Å ‚úÖ
‡§®‡§æ‡§Æ: ${m.name}
ID: ${m.id}
Verify: ${v}`
  ));
})
.catch(()=>alert("members.json load ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü"));
</script>

</body>
</html>
