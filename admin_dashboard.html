<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
.header{
  background:#7b0000;color:#fff;
  padding:15px;text-align:center
}
.container{
  max-width:1200px;margin:20px auto;
  background:#fff;padding:15px;border-radius:10px
}
h3{color:#7b0000;margin-top:0}
input{
  padding:8px;width:100%;margin:6px 0
}
.btn{
  padding:6px 10px;border:none;
  border-radius:5px;cursor:pointer;
  font-size:13px;margin:2px
}
.red{background:#7b0000;color:#fff}
.gray{background:#555;color:#fff}
.green{background:#28a745;color:#fff}
.blue{background:#1877f2;color:#fff}

table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#f0f0f0}
.badge{
  padding:2px 6px;border-radius:4px;
  font-size:12px;color:#fff
}
.approved{background:#28a745}
.pending{background:#dc3545}

textarea{
  width:100%;height:200px;
  font-family:monospace
}
.footer{
  text-align:center;font-size:12px;
  color:#555;margin:30px 0
}
</style>
</head>

<body>

<div class="header">
  <h2>‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ</h2>
  <p>Admin Dashboard (GitHub Static Mode)</p>
</div>

<div class="container">

<h3>üîç Search Member</h3>
<input id="q" placeholder="Search by Name / Member ID / Post / District">
<button class="btn red" onclick="search()">Search</button>
<button class="btn gray" onclick="reset()">Reset</button>

<h3>üìã Members List</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>Post</th>
<th>Level</th>
<th>District</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="tbl"></tbody>
</table>

<h3>üßæ Selected Member JSON (Copy / Edit)</h3>
<textarea id="json"></textarea>

</div>

<div class="footer">
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ  
<br>Admin Internal Use Only
</div>

<script>
let members=[];

fetch("data/members.json")
.then(r=>r.json())
.then(d=>{
  members=d;
  render(d);
});

function render(list){
  const tb=document.getElementById("tbl");
  tb.innerHTML="";
  list.forEach((m,i)=>{
    const status=(m.status||"pending").toLowerCase();
    tb.innerHTML+=`
    <tr>
      <td>${m.member_id||""}</td>
      <td>${m.name||""}</td>
      <td>${m.post||""}</td>
      <td>${m.level||""}</td>
      <td>${m.district||""}</td>
      <td>
        <span class="badge ${status}">
          ${status.toUpperCase()}
        </span>
      </td>
      <td>
        <button class="btn blue" onclick="select(${i})">JSON</button>
        <a class="btn gray" target="_blank"
           href="verify.html?id=${m.member_id}">Verify</a>
        <a class="btn green" target="_blank"
           href="idcard_print.html?id=${m.member_id}">ID</a>
      </td>
    </tr>`;
  });
}

function search(){
  const q=document.getElementById("q").value.toLowerCase();
  render(members.filter(m=>
    JSON.stringify(m).toLowerCase().includes(q)
  ));
}

function reset(){
  q.value="";
  render(members);
}

function select(i){
  document.getElementById("json").value =
    JSON.stringify(members[i],null,2);
}
</script>

</body>
</html>
