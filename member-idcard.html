<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Member ID Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
#card{width:300px;padding:15px;border:2px solid #444;border-radius:12px;
text-align:center;margin-top:15px;background:#fff}
body{font-family:system-ui;background:#eaeaea;padding:10px}
input{padding:8px;width:90%;margin-top:10px}
button{padding:8px 12px;margin-top:10px}
</style>
</head>

<body>

<h3>ЁЯФО Mobile Number рдбрд╛рд▓рдХрд░ ID Card рджреЗрдЦреЗрдВ</h3>

<input id="mobile" placeholder="10 Digit Mobile">
<button id="find">Search</button>

<div id="card" style="display:none"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, query, where, getDocs }
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey:"AIzaSyBQpzc5xAvInmSCbzsZiy7TpD0OXVyij_4",
 authDomain:"jb-rrms-membership-system.firebaseapp.com",
 projectId:"jb-rrms-membership-system"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("find").onclick = async ()=>{

 let m = mobile.value.trim();

 if(m.length!=10){ alert("рд╕рд╣реА рдореЛрдмрд╛рдЗрд▓ рдбрд╛рд▓реЗрдВ"); return;}

 const q=query(collection(db,"approved_members"), where("mobile","==",m));
 const r=await getDocs(q);

 if(r.empty){ alert("Member Not Found / Not Approved Yet"); return;}

 r.forEach(d=>{
  let x=d.data();

  card.style.display="block";
  card.innerHTML = `
   <h3>JB RRMS</h3>
   <b>${x.name}</b><br>
   рдореЛрдмрд╛рдЗрд▓: ${x.mobile}<br>
   рдкрдж: ${x.role}<br>
   рдкрддрд╛: ${x.address}<br>
   рд╕реНрдЯреЗрдЯрд╕: Approved
  `;
 });

}

</script>

</body>
</html>
