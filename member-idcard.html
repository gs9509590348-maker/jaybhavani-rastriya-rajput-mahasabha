<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Member ID Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
#card{
 width:300px;
 padding:15px;
 border:2px solid #444;
 border-radius:12px;
 text-align:center;
 margin-top:15px;
 background:#fff
}
body{font-family:system-ui;background:#eaeaea;padding:10px}
input{padding:8px;width:90%;margin-top:10px}
button{padding:8px 12px;margin-top:10px}
</style>
</head>

<body>

<h3>üîé Mobile Number ‡§°‡§æ‡§≤‡§ï‡§∞ ID Card ‡§¶‡•á‡§ñ‡•á‡§Ç</h3>

<input id="mobile" placeholder="10 Digit Mobile">
<button id="find">Search</button>

<div id="card" style="display:none"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, query, where, getDocs }
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey:"AIzaSyBQpzc5xAvInmSCbzsZiy7TpD0OXVyij_4",
 authDomain:"jb-rrms-membership-system.firebaseapp.com",
 projectId:"jb-rrms-membership-system"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

find.onclick = async ()=>{

 let m = mobile.value.trim();

 if(m.length!=10){
  alert("‡§∏‡§π‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç");
  return;
 }

 card.style.display="none";
 card.innerHTML="";

 const q = query(collection(db,"approved_members"), where("mobile","==",m));
 const r = await getDocs(q);

 if(r.empty){
  alert("Member Not Found / Not Approved Yet");
  return;
 }

 const x = r.docs[0].data();

 card.style.display="block";
 card.innerHTML = `
   <h3>JB RRMS</h3>
   <b>${x.name}</b><br>
   ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤: ${x.mobile}<br>
   ‡§™‡§¶: ${x.role || "‡§∏‡§¶‡§∏‡•ç‡§Ø"}<br>
   ‡§™‡§§‡§æ: ${x.address}<br>
   ‡§∏‡•ç‡§ü‡•á‡§ü‡§∏: ‚úÖ Approved
  `;
}

</script>

</body>
</html>
