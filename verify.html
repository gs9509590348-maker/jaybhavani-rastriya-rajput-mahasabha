<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Member Verify | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f4f4;
  margin:0;
}
.box{
  max-width:420px;
  margin:60px auto;
  background:#fff;
  padding:25px;
  border-radius:10px;
  box-shadow:0 4px 15px rgba(0,0,0,.15);
}
h2{
  text-align:center;
  color:#7b0000;
}
input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border:1px solid #ccc;
  border-radius:5px;
}
button{
  width:100%;
  background:#7b0000;
  color:#fff;
  border:none;
  padding:12px;
  font-size:16px;
  border-radius:5px;
  cursor:pointer;
}
.result{
  margin-top:20px;
  padding:15px;
  border:1px solid #ddd;
  border-radius:8px;
}
.success{color:green}
.error{color:red}
a.btn{
  display:inline-block;
  margin-top:8px;
  padding:8px 12px;
  background:#7b0000;
  color:#fff;
  text-decoration:none;
  border-radius:5px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="box">
  <h2>Member Verification</h2>

  <input id="mid" placeholder="Member ID">
  <input id="mobile" placeholder="Mobile Number">
  <button onclick="verify()">Verify</button>

  <div id="out"></div>
</div>

<script>
async function verify(){
  const mid = document.getElementById("mid").value.trim();
  const mob = document.getElementById("mobile").value.trim();
  const out = document.getElementById("out");

  out.innerHTML = "Checking...";

  if(!mid || !mob){
    out.innerHTML = "<p class='error'>Please enter Member ID and Mobile</p>";
    return;
  }

  const res = await fetch("data/members.json");
  const data = await res.json();

  const m = data.find(x => x.member_id === mid && x.mobile === mob);

  if(!m){
    out.innerHTML = "<p class='error'>‚ùå Member not found</p>";
    return;
  }

  out.innerHTML = `
    <div class="result">
      <p class="success"><b>‚úÖ Verified Member</b></p>
      <p><b>Name:</b> ${m.name}</p>
      <p><b>Father:</b> ${m.father}</p>
      <p><b>Post:</b> ${m.post}</p>
      <p><b>Level:</b> ${m.level}</p>
      <p><b>Department:</b> ${m.department}</p>

      <a class="btn" href="${m.id_card}" target="_blank">ü™™ ID Card</a>
      <a class="btn" href="${m.certificate}" target="_blank">üìú Certificate</a>
      <a class="btn" href="${m.appointment}" target="_blank">üìÑ Appointment</a>

      <a class="btn" style="background:#25D366"
         onclick="shareOnWhatsApp('${m.member_id}')">
         üì≤ Share on WhatsApp
      </a>
    </div>
  `;
}

function shareOnWhatsApp(memberId){
  const msg =
    "‡§Æ‡•à‡§Ç ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ ‡§ï‡§æ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡•Ç‡§Å ‚úÖ\n\n" +
    "Member ID: " + memberId + "\n\n" +
    "Verify here üëá\n" +
    "https://jbrrms.in/verify.html?id=" + memberId;

  const url = "https://wa.me/?text=" + encodeURIComponent(msg);
  window.open(url, "_blank");
}
</script>

</body>
</html>
