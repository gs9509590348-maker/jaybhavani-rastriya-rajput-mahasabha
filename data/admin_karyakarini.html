<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Admin Panel | ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§æ‡§∞‡§£‡•Ä</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f4f4;
  margin:0;
}
header{
  background:#7b0000;
  color:#fff;
  padding:15px;
  text-align:center;
}
.container{
  max-width:1000px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  border:1px solid #ddd;
  padding:8px;
  font-size:14px;
  text-align:center;
}
th{
  background:#eee;
}
img{
  width:50px;
  height:50px;
  border-radius:50%;
  object-fit:cover;
}
input,select{
  width:100%;
  padding:6px;
}
button{
  padding:6px 10px;
  border:none;
  border-radius:4px;
  cursor:pointer;
}
.edit{background:#007bff;color:#fff}
.save{background:#28a745;color:#fff}
.delete{background:#dc3545;color:#fff}
.up{background:#ffc107}
.down{background:#ffc107}
.footer{
  text-align:center;
  font-size:13px;
  color:#555;
  margin:30px 0 10px;
}
</style>
</head>

<body>

<header>
  <h2>üîê Admin Panel ‚Äì ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§æ‡§∞‡§£‡•Ä ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</h2>
</header>

<div class="container">
  <p><b>‡§®‡•ã‡§ü:</b> Edit ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ JSON auto generate ‡§π‡•ã‡§ó‡§æ ‚Äì GitHub ‡§Æ‡•á‡§Ç paste ‡§ï‡§∞‡§®‡§æ ‡§π‡•ã‡§ó‡§æ</p>

  <table id="tbl">
    <thead>
      <tr>
        <th>Order</th>
        <th>Photo</th>
        <th>Name</th>
        <th>Post</th>
        <th>Level</th>
        <th>District</th>
        <th>State</th>
        <th>Mobile</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>üì¶ Updated JSON (Copy & Paste)</h3>
  <textarea id="jsonOut" style="width:100%;height:220px"></textarea>
</div>

<div class="footer">
¬© 2025 ‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ  
<br>Admin use only
</div>

<script>
let data = [];

fetch("data/karyakarini.json")
.then(r=>r.json())
.then(j=>{
  data = j.karyakarini.sort((a,b)=>a.order-b.order);
  render();
});

function render(){
  const tb = document.querySelector("#tbl tbody");
  tb.innerHTML = "";

  data.forEach((m,i)=>{
    if(!m.active) return;

    tb.innerHTML += `
    <tr>
      <td>${m.order}</td>
      <td><img src="${m.photo||'https://via.placeholder.com/50'}"></td>
      <td><input value="${m.name}" onchange="upd(${i},'name',this.value)"></td>
      <td><input value="${m.post}" onchange="upd(${i},'post',this.value)"></td>
      <td>
        <select onchange="upd(${i},'level',this.value)">
          <option ${m.level=='‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø'?'selected':''}>‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø</option>
          <option ${m.level=='‡§™‡•ç‡§∞‡§¶‡•á‡§∂'?'selected':''}>‡§™‡•ç‡§∞‡§¶‡•á‡§∂</option>
          <option ${m.level=='‡§ú‡§ø‡§≤‡§æ'?'selected':''}>‡§ú‡§ø‡§≤‡§æ</option>
        </select>
      </td>
      <td><input value="${m.district}" onchange="upd(${i},'district',this.value)"></td>
      <td><input value="${m.state}" onchange="upd(${i},'state',this.value)"></td>
      <td><input value="${m.mobile}" onchange="upd(${i},'mobile',this.value)"></td>
      <td>
        <button class="up" onclick="moveUp(${i})">‚¨Ü</button>
        <button class="down" onclick="moveDown(${i})">‚¨á</button>
        <button class="delete" onclick="del(${i})">‚ùå</button>
      </td>
    </tr>
    `;
  });

  document.getElementById("jsonOut").value =
JSON.stringify({
  last_updated: new Date().toISOString().split("T")[0],
  organization: "‡§ú‡§Ø ‡§≠‡§µ‡§æ‡§®‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§™‡•Ç‡§§ ‡§Æ‡§π‡§æ‡§∏‡§≠‡§æ",
  karyakarini: data
},null,2);
}

function upd(i,k,v){
  data[i][k]=v;
  render();
}

function del(i){
  if(confirm("Delete this member?")){
    data[i].active=false;
    render();
  }
}

function moveUp(i){
  if(i==0) return;
  [data[i].order,data[i-1].order]=[data[i-1].order,data[i].order];
  data.sort((a,b)=>a.order-b.order);
  render();
}

function moveDown(i){
  if(i==data.length-1) return;
  [data[i].order,data[i+1].order]=[data[i+1].order,data[i].order];
  data.sort((a,b)=>a.order-b.order);
  render();
}
</script>

</body>
</html>
