<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Certificate | JBRRMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#eee;
  font-family:Mangal, Arial, sans-serif;
  margin:0;
}
.paper{
  width:700px;max-width:95%;
  margin:30px auto;background:#fff;
  padding:30px;border:4px double #7b0000
}
h1{text-align:center;color:#7b0000;margin:0}
.sub{text-align:center;font-size:14px;margin-bottom:15px}
hr{border:0;border-top:2px solid #7b0000;margin:15px 0}
p{font-size:16px;line-height:1.8}
.footer-row{
  display:flex;justify-content:space-between;
  margin-top:40px;font-size:15px
}
.btn{
  display:block;margin:12px auto;
  padding:10px 16px;background:#7b0000;
  color:#fff;border:none;border-radius:6px;
  text-decoration:none;text-align:center;
  font-size:15px;cursor:pointer
}
.gray{background:#555}
.whatsapp{background:#25D366}
.site-footer{
  text-align:center;font-size:13px;
  color:#555;margin:40px 0 20px;line-height:1.6
}
@media print{
  .no-print{display:none}
  body{background:#fff}
}
</style>
</head>

<body>

<div class="paper" id="cert">

<h1>тШАя╕П<br>рдкреНрд░рдорд╛рдг рдкрддреНрд░</h1>
<div class="sub">
рдЬрдп рднрд╡рд╛рдиреА рд░рд╛рд╖реНрдЯреНрд░реАрдп рд░рд╛рдЬрдкреВрдд рдорд╣рд╛рд╕рднрд╛<br>
(рд░рд╛рд╖реНрдЯреНрд░реАрдп рд╕реНрддрд░ рдХрд╛ рд╕рд╛рдорд╛рдЬрд┐рдХ рд╕рдВрдЧрдарди)
</div>

<hr>

<p>
рдпрд╣ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐<br><br>

рд╢реНрд░реА <b id="name"></b><br>
рдкрд┐рддрд╛/рдЕрднрд┐рднрд╛рд╡рдХ : <b id="father"></b><br><br>

рдХреЛ <b>рдЬрдп рднрд╡рд╛рдиреА рд░рд╛рд╖реНрдЯреНрд░реАрдп рд░рд╛рдЬрдкреВрдд рдорд╣рд╛рд╕рднрд╛</b> рдореЗрдВ<br>
<b><span id="level"></span></b> рд╕реНрддрд░ рдкрд░<br>
<b><span id="post"></span></b> рдХреЗ рдкрдж рдкрд░<br><br>

рдирд┐рдпреБрдХреНрдд / рд╕реНрд╡реАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
</p>

<p>
рд╕рджрд╕реНрдп рдЖрдИрдбреА : <b id="mid"></b>
</p>

<div class="footer-row">
<div>
рджрд┐рдирд╛рдВрдХ : <span id="date"></span>
</div>
<div style="text-align:right">
(рдпрд╣ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдкреВрд░реНрдгрддрдГ рдбрд┐рдЬрд┐рдЯрд▓ рд╣реИ)<br>
QR Verify рджреНрд╡рд╛рд░рд╛ рдорд╛рдиреНрдп
</div>
</div>

<p style="text-align:center;font-weight:bold;margin-top:30px">
рдЬрдп рднрд╡рд╛рдиреА | рдЬрдп рд░рд╛рдЬрдкреВрддрд╛рдирд╛ ЁЯЪй
</p>

</div>

<button class="btn no-print" onclick="window.print()">ЁЯЦия╕П Print / Save PDF</button>
<button class="btn no-print" onclick="download()">тмЗя╕П Download Certificate</button>

<a id="idcard" class="btn gray no-print" target="_blank">ЁЯкк View ID Card</a>
<a id="appointment" class="btn gray no-print" target="_blank">ЁЯУД Appointment Letter</a>
<a id="verify" class="btn gray no-print" target="_blank">ЁЯФН Verify Online</a>
<button class="btn whatsapp no-print" onclick="shareWhatsApp()">ЁЯУ▓ Share on WhatsApp</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
const qs = new URLSearchParams(location.search);
const id = qs.get("id");
const VERIFY_BASE = "https://jbrrms.in/verify.html?id=";
let member=null;

if(!id){
  alert("тЭМ Member ID missing");
}

fetch("data/members.json")
.then(r=>r.json())
.then(list=>{
  member = list.find(x =>
    (x.member_id || x.memberId) === id
  );
  if(!member){
    alert("тЭМ Member not found");
    return;
  }

  name.innerText = member.name || "";
  father.innerText = member.father || "";
  level.innerText = member.level || "";
  post.innerText = member.post || "";
  mid.innerText = member.member_id || member.memberId || "";
  date.innerText = new Date().toLocaleDateString("hi-IN");

  idcard.href =
    "idcard_print.html?id=" + (member.member_id||member.memberId);
  appointment.href =
    "appointment.html?id=" + (member.member_id||member.memberId);
  verify.href =
    VERIFY_BASE + (member.member_id||member.memberId);
})
.catch(()=>{
  alert("тЭМ members.json load рдирд╣реАрдВ рд╣реБрдЖ");
});

function download(){
  html2canvas(document.getElementById("cert"),{scale:2})
  .then(c=>{
    const a=document.createElement("a");
    a.download="JBRRMS_Certificate_"+id+".png";
    a.href=c.toDataURL("image/png");
    a.click();
  });
}

function shareWhatsApp(){
  if(!member) return;
  const midv = member.member_id || member.memberId;
  const msg =
`рдореИрдВ рдЬрдп рднрд╡рд╛рдиреА рд░рд╛рд╖реНрдЯреНрд░реАрдп рд░рд╛рдЬрдкреВрдд рдорд╣рд╛рд╕рднрд╛ рдХрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рд╕рджрд╕реНрдп рд╣реВрдБ тЬЕ

рдирд╛рдо: ${member.name}
рдкрдж: ${member.post}
Member ID: ${midv}

Verify Online ЁЯСЗ
${VERIFY_BASE}${midv}`;
  window.open(
    "https://wa.me/?text="+encodeURIComponent(msg),
    "_blank"
  );
}
</script>

<footer class="site-footer">
┬й 2025 рдЬрдп рднрд╡рд╛рдиреА рд░рд╛рд╖реНрдЯреНрд░реАрдп рд░рд╛рдЬрдкреВрдд рдорд╣рд╛рд╕рднрд╛<br>
рдпрд╣ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЗрд╡рд▓ рд╕рдВрдЧрдардирд╛рддреНрдордХ рдЬрд╛рдирдХрд╛рд░реА рд╣реЗрддреБ рд╣реИред<br>
рдпрд╣ рдХрд┐рд╕реА рд╕рд░рдХрд╛рд░реА рд╕рдВрд╕реНрдерд╛ рд╕реЗ рд╕рдВрдмрджреНрдз рдирд╣реАрдВ рд╣реИред
</footer>

</body>
</html>
