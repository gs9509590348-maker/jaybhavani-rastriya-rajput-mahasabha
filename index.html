<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>जय भवानी राष्ट्रीय राजपूत महासभा - डिजिटल सदस्यता</title>

<style>
body{font-family:Arial;background:#f3f3f3;margin:0}
header{background:#ff9933;color:#fff;padding:15px;text-align:center}
.container{max-width:900px;margin:auto;background:#fff;padding:20px}
.card{border:1px solid #ddd;padding:10px;margin:10px 0}
input,select{width:100%;padding:8px;margin:5px 0}
button{padding:10px;background:#ff9933;border:0;color:#fff;cursor:pointer}
.hidden{display:none}
.idcard,.certificate,.appointment{border:2px solid #ff9933;padding:10px;margin-top:10px}
footer{text-align:center;padding:15px;color:#555}
</style>
</head>

<body>

<header>
<h2>जय भवानी राष्ट्रीय राजपूत महासभा</h2>
<h4>डिजिटल सदस्यता एवं पहचान प्रणाली</h4>
</header>

<div class="container">

<h3>सदस्य पंजीकरण</h3>
<input id="name" placeholder="पूरा नाम">
<input id="mobile" placeholder="मोबाइल नंबर">
<input id="address" placeholder="पता">
<select id="role">
<option>सदस्य</option>
<option>जिला अध्यक्ष</option>
<option>प्रदेश अध्यक्ष</option>
<option>महामंत्री</option>
</select>
<button onclick="register()">सदस्य बनें</button>

<hr>

<h3>सदस्य लॉगिन</h3>
<input id="loginMobile" placeholder="मोबाइल नंबर">
<button onclick="login()">लॉगिन</button>

<div id="memberArea" class="hidden">
<h3>आपका डैशबोर्ड</h3>
<p id="mname"></p>
<p id="mrole"></p>

<div class="idcard">
<h3>डिजिटल आई-कार्ड</h3>
<p id="idc"></p>
</div>

<div class="certificate">
<h3>सदस्यता प्रमाणपत्र</h3>
<p id="cert"></p>
</div>

<div class="appointment hidden" id="apptBox">
<h3>नियुक्ति-पत्र</h3>
<p id="appt"></p>
</div>
</div>

<hr>

<h3>एडमिन लॉगिन</h3>
<input id="adminUser" placeholder="Admin Username">
<input id="adminPass" type="password" placeholder="Admin Password">
<button onclick="adminLogin()">लॉगिन</button>

<div id="adminPanel" class="hidden">
<h3>एडमिन कंट्रोल पैनल</h3>
<div id="members"></div>
</div>

</div>

<footer>जय भवानी • राष्ट्र • राजपूताना</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
// ========= अपने Firebase Config यहाँ डालें =========
const firebaseConfig = {
 apiKey: "YOUR_KEY",
 authDomain: "YOUR_DOMAIN",
 projectId: "YOUR_PROJECT",
 storageBucket: "YOUR_BUCKET",
 messagingSenderId: "XXXX",
 appId: "XXXX"
};
// ===================================================

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ------- सदस्य पंजीकरण -------
async function register(){
 if(!name.value || !mobile.value) return alert("सभी जानकारी भरें");

 await db.collection("members").add({
  name:name.value,
  mobile:mobile.value,
  address:address.value,
  role:role.value,
  id:"JBNRM"+Date.now()
 });

 alert("पंजीकरण सफल — आपका आई-कार्ड तैयार है");
 name.value=mobile.value=address.value="";
}

// ------- सदस्य लॉगिन -------
async function login(){
 let q = await db.collection("members").where("mobile","==",loginMobile.value).get();
 if(q.empty) return alert("सदस्य नहीं मिला");

 let m = q.docs[0].data();

 memberArea.classList.remove("hidden");
 mname.innerText="नाम: "+m.name;
 mrole.innerText="पद: "+m.role;
 idc.innerText="सदस्य ID: "+m.id;
 cert.innerText="यह प्रमाणित किया जाता है कि "+m.name+" संगठन का अधिकृत सदस्य है।";

 if(m.role!="सदस्य"){
  apptBox.classList.remove("hidden");
  appt.innerText=m.name+" को "+m.role+" पद पर नियुक्त किया जाता है।";
 }
}

// ------- एडमिन लॉगिन -------
function adminLogin(){
 if(adminUser.value=="admin@jbrrms.in" && adminPass.value=="password123"){
  adminPanel.classList.remove("hidden");
  loadMembers();
 } else alert("गलत एडमिन विवरण");
}

// ------- सभी सदस्य दिखाएँ -------
async function loadMembers(){
 let box=document.getElementById("members");
 box.innerHTML="";

 let q = await db.collection("members").get();

 q.forEach(d=>{
  let m=d.data();
  box.innerHTML += `
  <div class='card'>
   नाम: ${m.name}<br>
   मोबाइल: ${m.mobile}<br>
   पद:
   <input value="${m.role}" onchange="updateRole('${d.id}',this.value)">
  </div>`;
 });
}

// ------- पद अपडेट -------
async function updateRole(id,newRole){
 await db.collection("members").doc(id).update({role:newRole});
 alert("पद अपडेट हुआ");
 loadMembers();
}
</script>

</body>
</html>
